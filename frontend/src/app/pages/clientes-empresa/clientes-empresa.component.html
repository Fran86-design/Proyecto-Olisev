<!-- Solo se muestra todo lo siguiente si ya se evalu칩 el acceso y est치 permitido -->
@if (accesoEvaluado && accesoPermitido) {
<div class="header vidrio blur">
  <!-- Bienvenida personalizada usando el nombre del usuario logueado -->
  <h2 class="titulo bienvenida">Bienvenid&#64; {{ usuario?.nombre }}</h2>
  <button (click)="cerrarSesion()" class="boton-salida aura">Cerrar sesi칩n</button>
</div>
<!-- Recorre cada campa침a del array `campanias()` con el bucle @for -->
@for (campana of campanias(); track campana) {
  <section class="campana tarjeta-glass animar">
    <div class="cabecera-campana cabecera-elevada">
      <h3 class="nombre-campana neon-titulo">游늬 Campa침a {{ campana }}</h3>
      <!-- Bot칩n que alterna la visibilidad del contenido de la campa침a -->
      <button (click)="alternarVisible(campana)" class="boton-toggle onda">
        <!-- Si est치 abierta, muestra "Cerrar"; si no, "Abrir" -->
        {{ campanasAbiertas().has(campana) ? 'Cerrar' : ' Abrir ' }}
      </button>
    </div>
    <!-- Solo se muestra el contenido si la campa침a est치 marcada como "abierta" en el Set, .has() verifica si un valor est치 presente dentro del set -->
    @if (campanasAbiertas().has(campana)) {
      <div class="tabla-container fade-glass">
        <table class="tabla-campana tabla-diamante">
          <thead>
            <tr>
              <th>Variedad</th>
              <th>Tipo</th>
              <th>Kilos</th>
              <th>Lote</th>
              <th>Fecha</th>
            </tr>
          </thead>
          <tbody>
            <!-- Itera sobre las entradas de esta campa침a -->
            @for (entrada of entradasPorCampania()[campana]; track entrada.id) {
              <tr>
                <td>{{ entrada.variedad }}</td>
                <td>{{ entrada.tipo }}</td>
                <td>{{ entrada.kilos }}</td>
                <td>{{ entrada.lote }}</td>
                <td>{{ entrada.fechaEntrada }}</td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    }
  </section>
}
}

@if (alerta.visible) {
  <div class="alerta alerta-{{ alerta.tipo }}">
    <span class="cerrar" (click)="alerta.visible = false">칑</span>
    {{ alerta.mensaje }}
  </div>
}
